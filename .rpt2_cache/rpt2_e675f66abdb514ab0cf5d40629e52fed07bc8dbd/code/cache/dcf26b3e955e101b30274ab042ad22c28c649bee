{"map":"{\"version\":3,\"file\":\"send.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/core/send.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,QAAQ,CAAA;AAEtC,mBAAmB;AACnB,MAAM,UAAU,UAAU,CAAC,GAAW,EAAE,IAAe;IACrD,IAAI,OAAO,SAAS,KAAK,WAAW;QAAE,OAAM;IAC5C,SAAS,CAAC,UAAU,IAAI,SAAS,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;AACzE,CAAC;AAED,YAAY;AACZ,MAAM,UAAU,SAAS,CAAC,GAAW,EAAE,IAAe;IAEpD,IAAM,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAA;IACrD,IAAM,QAAQ,GAAG,UAAG,GAAG,SAAG,SAAS,kBAAQ,kBAAkB,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC;IACrF,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAA;IACrB,GAAG,CAAC,GAAG,GAAG,QAAQ,CAAA;IAClB,GAAG,CAAC,MAAM,GAAG;QACX,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;QAChD,GAAG,GAAG,IAAI,CAAA;IACZ,CAAC,CAAC;IACF,GAAG,CAAC,OAAO,GAAG,UAAS,GAAG;QACxB,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;QACpD,GAAG,GAAG,IAAI,CAAA;IACZ,CAAC,CAAC;AACJ,CAAC;AAED,uBAAuB;AACvB,MAAM,UAAU,SAAS,CAAC,GAAW,EAAE,IAAe;IACpD,IAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAA;IAChC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;IACpB,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,gCAAgC,CAAC,CAAA;IACtE,GAAG,CAAC,eAAe,GAAG,IAAI,CAAA;IAC1B,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAA;AAC/B,CAAC\"}","code":"import { safeStringify } from \"./util\";\n// 使用sendBeacon发送数据\nexport function sendBeacon(url, data) {\n    if (typeof navigator === 'undefined')\n        return;\n    navigator.sendBeacon && navigator.sendBeacon(url, JSON.stringify(data));\n}\n// 使用img发送数据\nexport function sendByImg(url, data) {\n    var spliceStr = url.indexOf('?') === -1 ? '?' : '&';\n    var imageUrl = \"\".concat(url).concat(spliceStr, \"data=\").concat(encodeURIComponent(safeStringify(data)));\n    var img = new Image();\n    img.src = imageUrl;\n    img.onload = function () {\n        console.log(\"Tracking data sent successfully!\");\n        img = null;\n    };\n    img.onerror = function (err) {\n        console.error(\"Failed to send tracking data.\", err);\n        img = null;\n    };\n}\n// 使用XMLHttpRequest发送数据\nexport function sendByXHR(url, data) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('get', url);\n    xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n    xhr.withCredentials = true;\n    xhr.send(safeStringify(data));\n}\n//# sourceMappingURL=send.js.map","dts":{"name":"D:/PersonalProject/fontend-trace-geekbang-course/trace-sdk/dist/types/core/send.d.ts","writeByteOrderMark":false,"text":"export declare function sendBeacon(url: string, data: TraceData): void;\nexport declare function sendByImg(url: string, data: TraceData): void;\nexport declare function sendByXHR(url: string, data: TraceData): void;\n"}}
