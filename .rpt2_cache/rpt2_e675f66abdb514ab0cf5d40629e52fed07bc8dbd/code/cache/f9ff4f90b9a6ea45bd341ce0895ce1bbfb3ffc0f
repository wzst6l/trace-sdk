{"map":"{\"version\":3,\"file\":\"fingerprint.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/core/fingerprint.ts\"],\"names\":[],\"mappings\":\"AAAA,+CAA+C;AAC/C,SAAS,OAAO,CAAC,GAAW;IAC1B,kDAAkD;IAClD,mEAAmE;IACnE,4BAA4B;IAC5B,0BAA0B;IAC1B,iFAAiF;IACjF,6BAA6B;IAC7B,sBAAsB;IACtB,iDAAiD;IACjD,kBAAkB;IAElB,4CAA4C;IAE5C,YAAY;IACZ,IAAI,CAAC,GAAG,EAAE,CAAA;IACV,gBAAgB;IAChB,IAAI,CAAC,GAAG,IAAI,CAAA;IACZ,GAAG,IAAI,EAAE,CAAC;IACV,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAC3C,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,CAAC;IAED,OAAO,CAAC,CAAC;AACX,CAAC;AASD,IAAM,yBAAyB,GAAuB;IACpD,IAAI,EAAE,cAAc;IACpB,UAAU,EAAE,MAAM;IAClB,YAAY,EAAE,MAAM;IACpB,YAAY,EAAE,KAAK;CACpB,CAAA;AAED;;;;;GAKG;AACH,MAAM,CAAC,IAAM,gBAAgB,GAAG,UAAC,OAAe,EAAE,OAA4B;IAC5E,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,OAAO,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC;IACd,CAAC;IACD,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAChD,IAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACpC,4BAA4B;IAC5B,IAAI,CAAC,GAAG;QAAE,OAAO,IAAI,CAAC;IAEtB,IAAM,GAAG,GAAG,OAAO,IAAI,UAAU,CAAC;IAClC,GAAG,CAAC,YAAY,GAAG,OAAO,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC;IAClF,GAAG,CAAC,IAAI,GAAG,OAAO,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC;IAEnE,GAAG,CAAC,SAAS,GAAG,OAAO,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC;IAC5E,gBAAgB;IAChB,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAE7B,GAAG,CAAC,SAAS,GAAG,OAAO,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC;IAChF,WAAW;IACX,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;IACzB,4CAA4C;IAC5C,4BAA4B;IAE5B,IAAM,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,wBAAwB,EAAC,EAAE,CAAC,CAAC;IACpE,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;IACtB,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,EAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxC,OAAO,GAAG,CAAC;AACb,CAAC,CAAA\"}","code":"// https://www.cnblogs.com/cute/p/13142139.html\nfunction bin2hex(str) {\n    // discuss at: http://phpjs.org/functions/bin2hex/\n    // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // bugfixed by: Onno Marsman\n    // bugfixed by: Linuxworld\n    // improved by: ntoniazzi (http://phpjs.org/functions/bin2hex:361#comment_177616)\n    // example 1: bin2hex('Kev');\n    // returns 1: '4b6576'\n    // example 2: bin2hex(String.fromCharCode(0x00));\n    // returns 2: '00'\n    // https://gist.github.com/cythrawll/8603752\n    // let i = 0\n    var o = '';\n    // let l: number\n    var n = null;\n    str += '';\n    for (var i = 0, l = str.length; i < l; i++) {\n        n = str.charCodeAt(i).toString(16);\n        o += n.length < 2 ? '0' + n : n;\n    }\n    return o;\n}\nvar DEFAULT_FINGPRINT_OPTIONS = {\n    font: \"14px 'Arial'\",\n    reactStyle: \"#f60\",\n    contentStyle: \"#f60\",\n    textBaseline: \"top\"\n};\n/**\n * 生成唯一ID（非用户ID）\n * 通过HTML5 Canvas API创建一个接近不重复的唯一指纹ID\n * @param content\n * @returns\n */\nexport var getFingerprintId = function (content, options) {\n    if (!content) {\n        console.error(\"content is empty\");\n        return null;\n    }\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext(\"2d\");\n    // 如果不存在，则返回空值，说明不支持Canvas指纹\n    if (!ctx)\n        return null;\n    var txt = content || 'geekbang';\n    ctx.textBaseline = options && options.textBaseline ? options.textBaseline : \"top\";\n    ctx.font = options && options.font ? options.font : \"14px 'Arial'\";\n    ctx.fillStyle = options && options.reactStyle ? options.reactStyle : \"#f60\";\n    // 先画一个62x20矩形内容\n    ctx.fillRect(125, 1, 62, 20);\n    ctx.fillStyle = options && options.contentStyle ? options.contentStyle : \"#069\";\n    // 把字填充到矩形内\n    ctx.fillText(txt, 2, 15);\n    // ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\n    // ctx.fillText(txt, 4, 17);\n    var b64 = canvas.toDataURL().replace(\"data:image/png;base64,\", \"\");\n    var bin = atob(b64);\n    var crc = bin2hex(bin.slice(-16, -12));\n    return crc;\n};\n//# sourceMappingURL=fingerprint.js.map","dts":{"name":"D:/PersonalProject/fontend-trace-geekbang-course/trace-sdk/dist/types/core/fingerprint.d.ts","writeByteOrderMark":false,"text":"type FingerprintOptions = {\n    font?: string;\n    reactStyle?: string | CanvasGradient | CanvasPattern;\n    contentStyle?: string | CanvasGradient | CanvasPattern;\n    textBaseline?: CanvasTextBaseline;\n};\n/**\n * 生成唯一ID（非用户ID）\n * 通过HTML5 Canvas API创建一个接近不重复的唯一指纹ID\n * @param content\n * @returns\n */\nexport declare const getFingerprintId: (content: string, options?: FingerprintOptions) => string;\nexport {};\n"}}
